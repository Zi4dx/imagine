<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>مركز زليتن الطبي - 2025</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    fontFamily: { sans: ['Alexandria', 'sans-serif'] }
                }
            }
        }
    </script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Alexandria', sans-serif; background-color: #f8fafc; -webkit-tap-highlight-color: transparent; }

        /* إخفاء شريط التمرير للقائمة العلوية لجمالية أكثر */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Animations */
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide { animation: slideIn 0.4s ease-out forwards; }
        
        .glass-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        /* تحسين التمرير الناعم */
        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 flex flex-col h-screen overflow-hidden">

    <header class="glass-header z-50 shrink-0">
        <div class="px-4 py-3 flex items-center justify-between gap-3">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-white rounded-xl shadow-sm border border-slate-100 p-1 flex items-center justify-center shrink-0">
                    <img src="https://i.ibb.co/twfSnc5s/image.png" alt="Logo" class="w-full h-full object-contain">
                </div>
                <div>
                    <h1 class="font-black text-sm text-brand-900 leading-tight">مركز زليتن الطبي</h1>
                    <div class="flex items-center gap-1.5 mt-0.5">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                        <span class="text-[10px] text-slate-500 font-medium">مباشر 2025</span>
                    </div>
                </div>
            </div>
            
            <div class="relative flex-1 max-w-[180px]">
                <input type="text" id="search-input" placeholder="بحث..." class="w-full bg-slate-100 border-none rounded-full py-2 px-4 text-xs font-bold text-slate-700 focus:ring-2 focus:ring-brand-500 transition-all text-center">
                <i data-lucide="search" class="w-3.5 h-3.5 text-slate-400 absolute left-3 top-2.5"></i>
            </div>
        </div>

        <div class="px-2 pb-2">
            <nav id="tabs-container" class="flex items-center gap-2 overflow-x-auto no-scrollbar py-1 snap-x snap-mandatory pr-2 pl-2">
                </nav>
        </div>
    </header>

    <main class="flex-1 overflow-y-auto p-4 scroll-smooth" id="main-scroll">
        <div id="content-container" class="pb-20">
            </div>
    </main>

    <script>
        // --- DATA ---
        const LAB_TRANSLATIONS = {
            "Sugar": "السكر", "Urea": "اليوريا", "Creatinie": "الكرياتينين", "Na": "الصوديوم", "K": "البوتاسيوم", 
            "Cl": "الكلور", "Calcium": "الكالسيوم", "Magnisium": "المغنيسيوم", "phosphate": "الفوسفات", 
            "Uric acid": "حمض اليوريك", "T-Protein": "البروتين الكلي", "Albumin": "الألبومين", 
            "cholesterol": "الكوليسترول", "HDL": "HDL", "LDL": "LDL", "Triglycerides": "الدهون الثلاثية",
            "T-Billirubin": "بليروبين كلي", "D-Billirubin": "بليروبين مباشر", "GoT": "AST/GOT", 
            "GpT": "ALT/GPT", "Alk-phosph": "فوسفاتاز قلوي", "Amylase": "أميليز", "Lipase": "ليبيد", 
            "CK": "CK", "LDH": "LDH", "CK-mB": "CK-MB", "Troponin I": "تروبونين", "Iron": "الحديد", 
            "TIBC": "سعة الحديد", "CRP": "CRP", "HbA1c": "التراكمي", "Cr-clearance": "تصفية الكرياتينين", 
            "Gamma GT": "GGT", "u-albumin": "ألبومين بول", "ABG": "غازات دم", "CBC": "صورة دم", 
            "DLC": "تعداد تفصيلي", "ESR": "ترسيب", "PRT": "سيولة PT", "ApTT": "سيولة PTT", 
            "TFT": "غدة درقية", "Ferritin": "مخزون حديد", "Vit D": "فيتامين D", "Vit B12": "فيتامين B12", 
            "Folic acid": "فوليك أسيد", "PTH": "جار درقية", "Insuline": "أنسولين", "Homa IR": "مقاومة أنسولين", 
            "Fertility H": "خصوبة", "FSH": "FSH", "LH": "LH", "PRL": "هرمون حليب", "Tumor Marks": "أورام", 
            "B-hCG Titer": "حمل رقمي", "T-PSA": "بروستاتا", "Viral screen": "فيروسات", "Urine RE": "بول عام", 
            "Stoo RE": "براز عام", "Occult blood": "دم خفي", "Blood culture": "مزرعة دم", 
            "Urine Culture": "مزرعة بول", "D-Dimer": "D-Dimer", "Lactate": "لاكتيك", "Procalcitonin": "تسمم دم", 
            "Ammonia": "أمونيا", "Blood Group": "فصيلة دم", "Sickling Test": "تنجل", "Coombs Test": "كومبس", 
            "Hb Electrophoresis": "فصل كهربائي", "H. Pylori": "جرثومة معدة", "Widal": "تيفود", 
            "Brucella": "بروسيلا", "RF": "روماتويد", "Semen Analysis": "سائل منوي", "Cortisol": "كورتيزول", "AMH": "مخزون مبيض"
        };

        const CENTERS_DATA = {
            "total": { id: "total", name: "الإجمالي العام", shortName: "الكل", theme: "from-brand-800 to-brand-900", categories: getMockData("total") },
            "houriyat": { id: "houriyat", name: "مركز الحوريات", shortName: "الحوريات", theme: "from-teal-600 to-teal-800", categories: getMockData("sub") },
            "health_services": { id: "health_services", name: "الخدمات الصحية", shortName: "الخدمات", theme: "from-blue-600 to-blue-800", categories: getMockData("sub") },
            "naima": { id: "naima", name: "مستشفى نعيمة", shortName: "نعيمة", theme: "from-rose-600 to-rose-800", categories: getMockData("sub") },
            "inpatient": { id: "inpatient", name: "الأقسام الإيوائية", shortName: "الإيوائية", theme: "from-indigo-600 to-indigo-800", categories: getMockData("sub") },
            "jumaa": { id: "jumaa", name: "الجمعة القروي", shortName: "الجمعة", theme: "from-orange-600 to-orange-800", categories: getMockData("sub") },
            "diabetes": { id: "diabetes", name: "مركز السكري", shortName: "السكري", theme: "from-emerald-600 to-emerald-800", categories: getMockData("sub") }
        };

        // Helper to simulate data structure (using your numbers)
        function getMockData(type) {
            // This mirrors the structure you provided in the React code
            if(type === 'total') return {
                biochemistry: { "Sugar": 58080, "Urea": 54684, "Creatinie": 49104, "Na": 55056, "K": 55056, "Cl": 55056, "Calcium": 33852, "CRP": 63240, "HbA1c": 26784, "D-Dimer": 0, "Lactate": 0 },
                haematology: { "CBC": 66960, "ESR": 5588, "PRT": 10044, "Blood Group": 0 },
                hormones: { "TFT": 9306, "Ferritin": 7440, "Vit D": 1989, "B-hCG Titer": 644, "Cortisol": 0 },
                microbiology: { "Urine RE": 13764, "Stoo RE": 5208, "H. Pylori": 0 }
            };
            return {
                biochemistry: { "Sugar": 1200, "Urea": 1100, "Creatinie": 1100, "CRP": 500 },
                haematology: { "CBC": 2000, "ESR": 150 },
                hormones: { "TFT": 1000, "Vit D": 500 },
                microbiology: { "Urine RE": 800 }
            };
        }

        const CATEGORY_ICONS = {
            biochemistry: { icon: 'flask-conical', color: 'text-blue-600', bg: 'bg-blue-50' },
            haematology: { icon: 'droplet', color: 'text-rose-600', bg: 'bg-rose-50' },
            hormones: { icon: 'dna', color: 'text-purple-600', bg: 'bg-purple-50' },
            microbiology: { icon: 'microscope', color: 'text-emerald-600', bg: 'bg-emerald-50' }
        };

        let activeId = "total";
        let searchTerm = "";

        // --- RENDER TABS (NAVIGATION) ---
        function renderTabs() {
            const container = document.getElementById('tabs-container');
            container.innerHTML = '';

            Object.values(CENTERS_DATA).forEach(center => {
                const isActive = center.id === activeId;
                const btn = document.createElement('button');
                btn.onclick = () => switchCenter(center.id);
                
                // تصميم الزر (Chip Design)
                btn.className = `
                    flex items-center gap-2 px-4 py-2.5 rounded-full text-xs font-bold transition-all duration-300 whitespace-nowrap snap-start border
                    ${isActive 
                        ? 'bg-brand-900 text-white border-brand-900 shadow-md shadow-brand-900/20 scale-105' 
                        : 'bg-white text-slate-500 border-slate-200 hover:bg-slate-50 hover:border-slate-300'}
                `;
                
                btn.innerHTML = `
                    ${center.name}
                    ${isActive ? '<i data-lucide="check-circle-2" class="w-3 h-3 text-brand-300"></i>' : ''}
                `;
                container.appendChild(btn);
            });
            lucide.createIcons();
        }

        // --- RENDER CONTENT ---
        function renderContent() {
            const center = CENTERS_DATA[activeId];
            const container = document.getElementById('content-container');
            
            // Calculate total
            let totalSum = 0;
            Object.values(center.categories).forEach(cat => Object.values(cat).forEach(val => totalSum += val));

            // 1. Mobile Hero Card
            let html = `
                <div class="relative overflow-hidden rounded-3xl p-6 mb-6 shadow-xl text-white bg-gradient-to-br ${center.theme} animate-slide">
                    <div class="absolute right-[-20px] top-[-20px] w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
                    <div class="flex justify-between items-end relative z-10">
                        <div>
                            <p class="text-brand-100 text-xs font-medium mb-1">إجمالي الفحوصات</p>
                            <h2 class="text-4xl font-black tracking-tighter" id="main-counter">0</h2>
                        </div>
                        <div class="bg-white/10 backdrop-blur-md p-2 rounded-xl border border-white/10">
                             <i data-lucide="bar-chart-3" class="w-6 h-6 text-white"></i>
                        </div>
                    </div>
                </div>
            `;

            // 2. Sections
            Object.entries(center.categories).forEach(([catKey, data], idx) => {
                const style = CATEGORY_ICONS[catKey];
                const filteredData = Object.entries(data).filter(([key]) => {
                    const term = searchTerm.toLowerCase();
                    return key.toLowerCase().includes(term) || getTrans(key).toLowerCase().includes(term);
                });

                if (filteredData.length > 0) {
                    html += `
                        <div class="mb-6 animate-slide" style="animation-delay: ${idx * 100}ms">
                            <div class="flex items-center gap-2 mb-3 px-1">
                                <div class="w-6 h-6 rounded-lg ${style.bg} ${style.color} flex items-center justify-center">
                                    <i data-lucide="${style.icon}" class="w-3.5 h-3.5"></i>
                                </div>
                                <h3 class="font-bold text-slate-800 text-sm">${catKey === 'biochemistry' ? 'كيمياء حيوية' : catKey === 'haematology' ? 'أمراض دم' : catKey === 'hormones' ? 'هرمونات' : 'أحياء دقيقة'}</h3>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3">
                    `;

                    filteredData.forEach(([key, value]) => {
                        const isNew = value === 0 && activeId === 'total';
                        html += `
                            <div class="bg-white p-3 rounded-2xl shadow-sm border border-slate-100 flex flex-col justify-between h-24 relative overflow-hidden ${isNew ? 'ring-1 ring-green-500/30' : ''}">
                                ${isNew ? '<div class="absolute top-2 left-2 w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></div>' : ''}
                                
                                <span class="text-[11px] font-bold text-slate-500 leading-tight truncate" title="${getTrans(key)}">
                                    ${getTrans(key)}
                                </span>
                                
                                <div class="mt-2">
                                    <span class="text-lg font-black text-slate-800 block">
                                        ${isNew ? '--' : value.toLocaleString()}
                                    </span>
                                    ${!isNew ? `
                                        <div class="w-full h-1 bg-slate-100 rounded-full mt-1.5 overflow-hidden">
                                            <div class="h-full bg-brand-500 rounded-full" style="width: 40%"></div>
                                        </div>` 
                                    : '<span class="text-[9px] text-green-600 bg-green-50 px-1.5 py-0.5 rounded-md">جديد</span>'}
                                </div>
                            </div>
                        `;
                    });

                    html += `</div></div>`;
                }
            });

            container.innerHTML = html;
            lucide.createIcons();

            // Animate Counter
            const counterEl = document.getElementById('main-counter');
            if(counterEl) animateValue(counterEl, 0, totalSum, 1000);
        }

        // --- UTILS ---
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString();
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        function switchCenter(id) {
            activeId = id;
            renderTabs();
            renderContent();
            
            // Scroll selected tab into view
            const container = document.getElementById('tabs-container');
            // Simple logic to center the active button would go here
        }

        function getTrans(k) { return LAB_TRANSLATIONS[k] || k; }

        document.getElementById('search-input').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            renderContent();
        });

        // INIT
        window.onload = () => {
            renderTabs();
            renderContent();
            lucide.createIcons();
        };
    </script>
</body>
</html>
